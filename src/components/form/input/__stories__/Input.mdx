import { Meta, Story, ArgTypes, Source } from "@storybook/addon-docs/blocks"
import config from "@/config/site"
import * as InputStories from "./Input.stories"
import { Canvas } from "@/stories/_components/Canvas"
import { DocInfo } from "@/stories/_components/DocInfo"
import { TableOfContents } from "@/stories/_components/TableOfContents"
import { DocsLayout } from "@/stories/_components/DocsLayout"

<Meta title="UI/Form/Input" of={InputStories} />

<DocsLayout>
  <div>
    # Input

    A component for accepting user input.
    <DocInfo 
      importStatement={`import { Input } from '@clera-ui/form'`} 
      sourcePath={`components/form/input`} 
    />

    <br />

    ## **Purpose and Context**

    The `Input` component is a fundamental UI element used to collect information from users. It provides a versatile way to capture various types of data, such as text, numbers, email addresses, and passwords. Use it to:

    -   Gather user credentials for authentication.
    -   Collect personal information for profiles or forms.
    -   Enable users to search for content.
    -   Accept numerical data for calculations or settings.

    In {config.title}, the `Input` component is highly customizable through its props:

    -   **Type**: Specify the type of input (e.g., text, email, password) to enable appropriate validation and keyboard layouts.
    -   **FullWidth**: Control whether the input takes up the full width of its container.
    -   **Required**: Indicate that the input is mandatory.
    -   **InputSize**: Adjust the size of the input to fit the surrounding content.
    -   **ReadOnly**: Prevent users from editing the input's value.
    -   **Disabled**: Disable the input, preventing any interaction.
    -   **Label**: Display a hint to guide users on what to enter.

    ## **Implementation Notes**

    - Icon rendering: the visual icon inside inputs is owned by `FormInputWrapper`. Pass `icon` and `iconPosition` to `Input` and `MaskedInput`; the wrapper handles spacing and label adjustments.
    - Accessibility: labels are linked to inputs via `id` and floating labels are announced appropriately when focused.
    - Controlled vs uncontrolled: components support both controlled (`value`) and uncontrolled modes. Prefer controlled mode when validating or managing values externally.


    ## **Examples**

    ### **Text**

    A basic text input for accepting general text.

    <Canvas>
      <Canvas.Story>
        <Story of={InputStories.Text} />
      </Canvas.Story>

      <Canvas.Source>
        <Source className="my-0!" dark code={`
          import { Input } from '@clera-ui/form'

          const InputTextExample = () => {
            return <Input type="text" label="Enter text" />
          }

          export default InputTextExample
        `} />
      </Canvas.Source>
    </Canvas>

    <br />

    ### **Password**

    A password input for secure text entry.

    <Canvas>
      <Canvas.Story>
        <Story of={InputStories.Password} />
      </Canvas.Story>

      <Canvas.Source>
        <Source className="my-0!" dark code={`
          import { Input } from '@clera-ui/form'

          const InputPasswordExample = () => {
            return <Input type="password" label="Enter password" />
          }

          export default InputPasswordExample
        `} />
      </Canvas.Source>
    </Canvas>

    <br />

    ### **Number**

    A number input for accepting numeric values.

    <Canvas>
      <Canvas.Story>
        <Story of={InputStories.Number} />
      </Canvas.Story>

      <Canvas.Source>
        <Source className="my-0!" dark code={`
          import { Input } from '@clera-ui/form'

          const InputNumberExample = () => {
            return <Input type="number" label="Enter number" />
          }

          export default InputNumberExample
        `} />
      </Canvas.Source>
    </Canvas>

    <br />

    ### **Search**

    A search input for search queries.

    <Canvas>
      <Canvas.Story>
        <Story of={InputStories.Search} />
      </Canvas.Story>

      <Canvas.Source>
        <Source className="my-0!" dark code={`
          import { Input } from '@clera-ui/form'

          const InputSearchExample = () => {
            return <Input type="search" label="Enter search term" />
          }

          export default InputSearchExample
        `} />
      </Canvas.Source>
    </Canvas>

    <br />

    ### **Full Width**

    A full-width input that takes up the entire container width.

    <Canvas>
      <Canvas.Story>
        <Story of={InputStories.FullWidth} />
      </Canvas.Story>

      <Canvas.Source>
        <Source className="my-0!" dark code={`
          import { Input } from '@clera-ui/form'

          const InputFullWidthExample = () => {
            return <Input fullWidth label="Full width input" />
          }

          export default InputFullWidthExample
        `} />
      </Canvas.Source>
    </Canvas>

    <br />

    ### **Required**

    A required input that must be filled out.

    <Canvas>
      <Canvas.Story>
        <Story of={InputStories.Required} />
      </Canvas.Story>

      <Canvas.Source>
        <Source className="my-0!" dark code={`
          import { Input } from '@clera-ui/form'

          const InputRequiredExample = () => {
            return <Input required label="Required input" />
          }

          export default InputRequiredExample
        `} />
      </Canvas.Source>
    </Canvas>

    <br />

    ### **Small**

    A small-sized input.

    <Canvas>
      <Canvas.Story>
        <Story of={InputStories.Small} />
      </Canvas.Story>

      <Canvas.Source>
        <Source className="my-0!" dark code={`
          import { Input } from '@clera-ui/form'

          const InputSmallExample = () => {
            return <Input inputSize="sm" label="Small input" />
          }

          export default InputSmallExample
        `} />
      </Canvas.Source>
    </Canvas>

    <br />

    ### **Medium**

    A medium-sized input.

    <Canvas>
      <Canvas.Story>
        <Story of={InputStories.Medium} />
      </Canvas.Story>

      <Canvas.Source>
        <Source className="my-0!" dark code={`
          import { Input } from '@clera-ui/form'

          const InputMediumExample = () => {
            return <Input inputSize="md" label="Medium input" />
          }

          export default InputMediumExample
        `} />
      </Canvas.Source>
    </Canvas>

    <br />

    ### **Large**

    A large-sized input.

    <Canvas>
      <Canvas.Story>
        <Story of={InputStories.Large} />
      </Canvas.Story>

      <Canvas.Source>
        <Source className="my-0!" dark code={`
          import { Input } from '@clera-ui/form'

          const InputLargeExample = () => {
            return <Input inputSize="lg" label="Large input" />
          }

          export default InputLargeExample
        `} />
      </Canvas.Source>
    </Canvas>

    <br />

    ### **Read Only**

    A read-only input that cannot be edited.

    <Canvas>
      <Canvas.Story>
        <Story of={InputStories.ReadOnly} />
      </Canvas.Story>

      <Canvas.Source>
        <Source className="my-0!" dark code={`
          import { Input } from '@clera-ui/form'

          const InputReadOnlyExample = () => {
            return <Input readOnly label="Read-only input" />
          }

          export default InputReadOnlyExample
        `} />
      </Canvas.Source>
    </Canvas>

    <br />

    ### **Disabled**

    A disabled input that cannot be interacted with.

    <Canvas>
      <Canvas.Story>
        <Story of={InputStories.Disabled} />
      </Canvas.Story>

      <Canvas.Source>
        <Source className="my-0!" dark code={`
          import { Input } from '@clera-ui/form'

          const InputDisabledExample = () => {
            return <Input disabled label="Disabled input" />
          }

          export default InputDisabledExample
        `} />
      </Canvas.Source>
    </Canvas>
    
    <br />

    ### **With Icon**
    An input with an icon inside. This example shows an input with a user icon on the left.
    <Canvas>
      <Canvas.Story>
        <Story of={InputStories.WithIconLeft} />
      </Canvas.Story>

      <Canvas.Source>
        <Source className="my-0!" dark code={`
          import { Input } from '@clera-ui/form'
          import { FiUser } from 'react-icons/fi'

          const InputWithIconExample = () => {
            return <Input 
              label="Username" 
              icon={<FiUser />} 
              iconPosition="left" 
            />
          }

          export default InputWithIconExample
        `} />
      </Canvas.Source>
    </Canvas>

    <br />

    ## **Validation**

    The Input component supports comprehensive validation through built-in patterns, custom rules, and validation presets. Validation helps ensure data quality and provides immediate feedback to users.

    ### **When to Use Validation**

    Use validation when you need to:
    - Enforce data formats (email, phone numbers, etc.)
    - Restrict input to specific character sets (numbers only, letters only)
    - Apply business rules (min/max values, custom patterns)
    - Provide real-time feedback to improve user experience
    - Prevent invalid data submission

    ### **How to Implement Validation**

    The validation system provides multiple approaches:

    **1. Built-in Presets**: Use `validationPreset` for common patterns
    **2. Custom Configuration**: Use `validation` prop for advanced scenarios
    **3. Validation Modes**: Control when validation occurs (`onChange`, `onBlur`, `onSubmit`, `all`)

    ### **Email Validation**

    Simple email validation using a built-in preset.

    <Canvas>
      <Canvas.Story>
        <Story of={InputStories.WithValidation} />
      </Canvas.Story>

      <Canvas.Source>
        <Source className="my-0!" dark code={`
          import { Input } from '@clera-ui/form'

          const EmailValidationExample = () => {
            return (
              <Input 
                label="Email Address" 
                validationPreset="email"
                validationMode="onChange"
                showValidationErrors={true}
              />
            )
          }

          export default EmailValidationExample
        `} />
      </Canvas.Source>
    </Canvas>

    <br />

    ### **Numeric Validation with Range**

    Validates numeric input with min/max constraints and prevents invalid characters.

    <Canvas>
      <Canvas.Story>
        <Story of={InputStories.NumericValidation} />
      </Canvas.Story>

      <Canvas.Source>
        <Source className="my-0!" dark code={`
          import { Input } from '@clera-ui/form'

          const NumericValidationExample = () => {
            return (
              <Input 
                label="Age" 
                validation={{
                  pattern: 'numeric',
                  min: 18,
                  max: 120,
                  required: true,
                  preventInvalidInput: true,
                }}
                validationMode="onChange"
                showValidationErrors={true}
              />
            )
          }

          export default NumericValidationExample
        `} />
      </Canvas.Source>
    </Canvas>

    <br />

    ### **Username Validation**

    Complex validation using a preset that includes pattern, length, and transformation rules.

    <Canvas>
      <Canvas.Story>
        <Story of={InputStories.UsernameValidation} />
      </Canvas.Story>

      <Canvas.Source>
        <Source className="my-0!" dark code={`
          import { Input } from '@clera-ui/form'

          const UsernameValidationExample = () => {
            return (
              <Input 
                label="Username" 
                validationPreset="username"
                validationMode="all"
                showValidationErrors={true}
              />
            )
          }

          export default UsernameValidationExample
        `} />
      </Canvas.Source>
    </Canvas>

    <br />

    ### **Custom Pattern Validation**

    Advanced validation with custom regex pattern and business rules.

    <Canvas>
      <Canvas.Story>
        <Story of={InputStories.CustomValidation} />
      </Canvas.Story>

      <Canvas.Source>
        <Source className="my-0!" dark code={`
          import { Input } from '@clera-ui/form'

          const CustomValidationExample = () => {
            return (
              <Input 
                label="Product Code" 
                validation={{
                  pattern: /^[A-Z]{2}\\d{4}$/,
                  patternMessage: 'Product code must be 2 uppercase letters followed by 4 digits (e.g., AB1234)',
                  required: true,
                  rules: [
                    {
                      validate: (value) => value !== 'XX0000' || 'This code is reserved',
                      message: 'This product code is reserved',
                    }
                  ]
                }}
                validationMode="onBlur"
                showValidationErrors={true}
              />
            )
          }

          export default CustomValidationExample
        `} />
      </Canvas.Source>
    </Canvas>

    <br />

    ### **Phone Number with Transform**

    Demonstrates input transformation and pattern validation for phone numbers.

    <Canvas>
      <Canvas.Story>
        <Story of={InputStories.AdvancedValidation} />
      </Canvas.Story>

      <Canvas.Source>
        <Source className="my-0!" dark code={`
          import { Input } from '@clera-ui/form'

          const PhoneValidationExample = () => {
            return (
              <Input 
                label="Phone Number" 
                validation={{
                  pattern: 'phoneUS',
                  required: true,
                  transform: (value) => value.replace(/[^\\d\\-\\(\\)\\s\\+]/g, ''),
                  preventInvalidInput: false,
                }}
                validationMode="onBlur"
                showValidationErrors={true}
              />
            )
          }

          export default PhoneValidationExample
        `} />
      </Canvas.Source>
    </Canvas>

    <br />

    ### **Available Validation Presets**

    The following presets are available for quick setup:

    - `email` - Email address validation with transformation
    - `phone` - General phone number validation
    - `strongPassword` - Strong password requirements
    - `username` - Username validation (3-20 chars, alphanumeric + special chars)
    - `name` - Person name validation (letters, spaces, hyphens, apostrophes)
    - `numeric(min?, max?)` - Numeric input with optional range
    - `decimal(min?, max?)` - Decimal number validation
    - `alphanumeric(minLength?, maxLength?)` - Letters and numbers only
    - `url` - URL validation with transformation
    - `zipCode` - US ZIP code validation

    ### **Validation Props**

    | Prop | Type | Description |
    |------|------|-------------|
    | `validation` | `ValidationConfig` | Complete validation configuration object |
    | `validationPreset` | `keyof ValidationPresets` | Use a built-in validation preset |
    | `showValidationErrors` | `boolean` | Whether to display validation errors (default: `true`) |
    | `validationMode` | `onChange`, `onBlur`, `onSubmit`, `all` | When to trigger validation (default: `'onBlur'`) |
    | `onValidationChange` | `(isValid: boolean, errors: string[]) => void` | Callback when validation state changes |

    <br />

    ## **API**

    Below is a comprehensive list of all the props available for the Input component, along with their types, default values, and descriptions.

    <ArgTypes />

    ## **FAQ**

    #### **What are the different input types available?**

    The Input component supports the following types: `text`, `email`, `password`, `number`, and `search`. Each type provides specific validation and keyboard layouts.

    <Canvas.Source>
      <Source className="my-0!" dark code={`
        <Input type="text" label="Enter your username" />
      `} />
    </Canvas.Source>

    #### **How do I make an input full width?**

    Use the `fullWidth` prop to make the input take up the entire width of its container.

    <Canvas.Source>
      <Source className="my-0!" dark code={`
        <Input fullWidth label="Full width input" />
      `} />
    </Canvas.Source>

    #### **How do I make an input required?**

    Use the `required` prop to indicate that the input is mandatory.

    <Canvas.Source>
      <Source className="my-0!" dark code={`
        <Input required label="Required input" />
      `} />
    </Canvas.Source>

    #### **How do I change the size of an input?**

    Use the `inputSize` prop to control the input's size. Available sizes are: `sm`, `md`, and `lg`.

    <Canvas.Source>
      <Source className="my-0!" dark code={`
        <Input inputSize="lg" label="Large input" />
      `} />
    </Canvas.Source>

    #### **How do I make an input read-only?**

    Use the `readOnly` prop to prevent users from editing the input's value.

    <Canvas.Source>
      <Source className="my-0!" dark code={`
        <Input readOnly label="Read-only input" />
      `} />
    </Canvas.Source>

    #### **How do I disable an input?**

    Use the `disabled` prop to disable the input, preventing any interaction.

    <Canvas.Source>
      <Source className="my-0!" dark code={`
        <Input disabled label="Disabled input" />
      `} />
    </Canvas.Source>
  </div>

  <div>
    <TableOfContents
      items={[
        {
          id: "purpose-and-context",
          label: "Purpose and Context"
        },
        {
          id: "examples",
          label: "Examples",
          children: [
            {
              id: "text",
              label: "Text"
            },
            {
              id: "password",
              label: "Password"
            },
            {
              id: "number",
              label: "Number"
            },
            {
              id: "search",
              label: "Search"
            },
            {
              id: "full-width",
              label: "Full Width"
            },
            {
              id: "required",
              label: "Required"
            },
            {
              id: "medium",
              label: "Medium"
            },
            {
              id: "read-only",
              label: "Read Only"
            },
            {
              id: "disabled",
              label: "Disabled"
            }
          ]
        },
        {
          id: "api",
          label: "API"
        },
        {
          id: "faq",
          label: "FAQ",
          children: [
            {
              id: "what-are-the-different-input-types-available",
              label: "What are the different..."
            },
            {
              id: "how-do-i-make-an-input-full-width",
              label: "How do I make an..."
            },
            {
              id: "how-do-i-make-an-input-required",
              label: "How do I make an input..."
            }
          ]
        },
      ]}
    />
  </div>
</DocsLayout>